# MiniBlog - Go-Zero å¾®æœåŠ¡åšå®¢ç³»ç»Ÿ

åŸºäº Go-Zero æ¡†æ¶æ„å»ºçš„è½»é‡çº§åšå®¢ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œæ”¯æŒ Docker å®¹å™¨åŒ–å¼€å‘ç¯å¢ƒå’Œçƒ­é‡è½½ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [Go-Zero](https://go-zero.dev/)
- **æ•°æ®åº“**: MySQL
- **ç¼“å­˜**: Redis
- **æ¶ˆæ¯é˜Ÿåˆ—**: Kafka
- **API æ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆ
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **çƒ­é‡è½½**: [Air](https://github.com/air-verse/air)
- **ç½‘å…³**: Nginx
- **æµ‹è¯•å·¥å…·**: REST Client (VSCode æ’ä»¶)

## é¡¹ç›®ç»“æ„

```tree
miniblog-v3/
â”œâ”€â”€ apps/                       # å¾®æœåŠ¡åº”ç”¨ç›®å½•
â”‚   â””â”€â”€ user/                   # ç”¨æˆ·æœåŠ¡
â”‚       â”œâ”€â”€ api/                # HTTP API æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ etc/           # é…ç½®æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ internal/      # å†…éƒ¨ä»£ç 
â”‚       â”‚   â”œâ”€â”€ user.api       # API å®šä¹‰
â”‚       â”‚   â””â”€â”€ user.go        # æœåŠ¡å…¥å£
â”‚       â””â”€â”€ rpc/               # RPC æœåŠ¡
â”‚           â”œâ”€â”€ etc/           # é…ç½®æ–‡ä»¶
â”‚           â”œâ”€â”€ internal/      # å†…éƒ¨ä»£ç 
â”‚           â”œâ”€â”€ rpc.api        # RPC å®šä¹‰
â”‚           â””â”€â”€ rpc.go         # æœåŠ¡å…¥å£
â”œâ”€â”€ _output/                    # æ„å»ºè¾“å‡ºç›®å½•ï¼ˆmake build ç”Ÿæˆï¼‰
â”œâ”€â”€ deploy/                     # éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ dev/                   # å¼€å‘ç¯å¢ƒé…ç½®
â”‚       â”œâ”€â”€ docker-compose.yml     # åº”ç”¨æœåŠ¡é…ç½®
â”‚       â”œâ”€â”€ docker-compose.env.yml # åŸºç¡€ç¯å¢ƒæœåŠ¡é…ç½®ï¼ˆMySQLã€Redisã€Kafkaï¼‰
â”‚       â”œâ”€â”€ Dockerfile              # å¼€å‘ç¯å¢ƒ Dockerfile
â”‚       â”œâ”€â”€ air/                    # Air çƒ­é‡è½½é…ç½®
â”‚       â””â”€â”€ nginx/                  # Nginx é…ç½®
â”œâ”€â”€ tmp/                       # ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼ˆAir çƒ­é‡è½½ä½¿ç”¨ï¼‰
â”œâ”€â”€ go.mod                     # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum                     # Go æ¨¡å—ä¾èµ–
â”œâ”€â”€ Makefile                   # æ„å»ºå’Œå¼€å‘å‘½ä»¤
â””â”€â”€ request.http               # API æµ‹è¯•ç”¨ä¾‹
```

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šå®Œæ•´ Docker å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨åŸºç¡€ç¯å¢ƒæœåŠ¡ï¼ˆå¿…é¡»å…ˆå¯åŠ¨ï¼‰

âš ï¸ **é‡è¦**: å¿…é¡»å…ˆå¯åŠ¨åŸºç¡€ç¯å¢ƒæœåŠ¡ï¼Œåˆ›å»ºå…±äº«ç½‘ç»œå’Œä¾èµ–æœåŠ¡ï¼š

```bash
# å¯åŠ¨åŸºç¡€ç¯å¢ƒæœåŠ¡ï¼ˆMySQLã€Redisã€Kafkaã€å¯è§‚æµ‹æ€§ç»„ä»¶ï¼‰
make env-start

# ç­‰å¾…æ‰€æœ‰åŸºç¡€æœåŠ¡å¯åŠ¨å®Œæˆï¼ˆå¤§çº¦ 30-60 ç§’ï¼‰
docker compose -f docker-compose.env.yml ps
```

#### 2. å¯åŠ¨åº”ç”¨æœåŠ¡

åŸºç¡€ç¯å¢ƒå¯åŠ¨å®Œæˆåï¼Œå†å¯åŠ¨ Go åº”ç”¨æœåŠ¡ï¼š

```bash
# åå°å¯åŠ¨åº”ç”¨å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰
make dev

# æˆ–å‰å°å¯åŠ¨ï¼ˆå¯çœ‹å®æ—¶æ—¥å¿—ï¼‰
make dev-fg

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
make dev-status

# æŸ¥çœ‹æ—¥å¿—
make dev-logs

# åœæ­¢åº”ç”¨ç¯å¢ƒ
make dev-stop
```

#### 3. å®Œæ•´çš„å¯åŠ¨æµç¨‹

```bash
# å®Œæ•´å¯åŠ¨æµç¨‹
cd miniblog-v3/deploy/dev

# 1. å¯åŠ¨åŸºç¡€ç¯å¢ƒï¼ˆç½‘ç»œã€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¯è§‚æµ‹æ€§ï¼‰
make env-start

# 2. ç­‰å¾…åŸºç¡€æœåŠ¡å°±ç»ª
sleep 30

# 3. å¯åŠ¨åº”ç”¨æœåŠ¡
make dev

# 4. éªŒè¯æ‰€æœ‰æœåŠ¡éƒ½åœ¨åŒä¸€ç½‘ç»œä¸­
docker network ls
docker network inspect miniblog-network
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

#### ç¯å¢ƒå‡†å¤‡

1. å®‰è£… Go 1.24+
2. å®‰è£…å¼€å‘å·¥å…·:

   ```bash
   # å®‰è£…å¿…è¦å·¥å…·
   make install-tools
   
   # æ‰‹åŠ¨å®‰è£… goctl å·¥å…·
   go install github.com/zeromicro/go-zero/tools/goctl@latest
   ```

#### å¯åŠ¨æœåŠ¡

```bash
# æ‰‹åŠ¨å¯åŠ¨å•ä¸ªæœåŠ¡
cd apps/user/api
go run user.go -f etc/user.yaml
```

## å¼€å‘ç¯å¢ƒæ¶æ„

### ğŸŒ ç½‘ç»œæ¶æ„

æ‰€æœ‰æœåŠ¡è¿è¡Œåœ¨åŒä¸€ä¸ª Docker ç½‘ç»œ `miniblog-network` ä¸­ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    miniblog-network                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Application Layer                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Nginx     â”‚    â”‚  User API   â”‚    â”‚  User RPC   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   Gateway   â”‚    â”‚   Service   â”‚    â”‚   Service   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   (8099)    â”‚    â”‚   (8888)    â”‚    â”‚   (8889)    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Infrastructure Layer                      â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  MySQL  â”‚  â”‚  Redis  â”‚  â”‚  Kafka  â”‚  â”‚ Zookeeper   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (3306)  â”‚  â”‚ (6379)  â”‚  â”‚ (9092)  â”‚  â”‚   (2181)    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Observability Layer                       â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Prometheus  â”‚ â”‚  Grafana   â”‚ â”‚ Elasticsearchâ”‚ â”‚Kibana â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (19090)   â”‚ â”‚  (3000)    â”‚ â”‚   (9200)     â”‚ â”‚(5601) â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚   Jaeger   â”‚ â”‚  Filebeat  â”‚ â”‚  go-stash  â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  (16686)   â”‚ â”‚     -      â”‚ â”‚     -      â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ å¯åŠ¨ä¾èµ–å…³ç³»

**é‡è¦**: å¿…é¡»æŒ‰ä»¥ä¸‹é¡ºåºå¯åŠ¨ï¼Œç¡®ä¿ç½‘ç»œå’Œä¾èµ–æœåŠ¡å°±ç»ªï¼š

1. **åŸºç¡€ç¯å¢ƒ** (`docker-compose.env.yml`) â†’ åˆ›å»ºç½‘ç»œå’ŒåŸºç¡€æœåŠ¡
2. **åº”ç”¨æœåŠ¡** (`docker-compose.yml`) â†’ åŠ å…¥å·²å­˜åœ¨çš„ç½‘ç»œ

### æœåŠ¡åˆ—è¡¨

| æœåŠ¡åç§° | å®¹å™¨åç§° | å†…éƒ¨ç«¯å£ | å¤–éƒ¨ç«¯å£ | è¯´æ˜ |
|---------|---------|---------|---------|------|
| user-api | miniblog-user-api | 8888 | 8888 | ç”¨æˆ·APIæœåŠ¡ |
| user-rpc | miniblog-user-rpc | 8889 | 8889 | ç”¨æˆ·RPCæœåŠ¡ |
| nginx | miniblog-nginx | 8099 | 8099 | APIç½‘å…³ |

### è®¿é—®åœ°å€

- **ç½‘å…³å¥åº·æ£€æŸ¥**: `http://localhost:8099/health`
- **ç”¨æˆ·APIæœåŠ¡**: `http://localhost:8099/api/user/*`
- **ç”¨æˆ·RPCæœåŠ¡**: `http://localhost:8099/rpc/user/*`
- **ç›´æ¥è®¿é—®API**: `http://localhost:8888`
- **ç›´æ¥è®¿é—®RPC**: `http://localhost:8889`

## å¼€å‘å·¥ä½œæµ

### ä»£ç çƒ­é‡è½½

é¡¹ç›®ä½¿ç”¨ Air å·¥å…·å®ç°çƒ­é‡è½½ï¼Œå½“ä½ ä¿®æ”¹ä»£ç æ—¶ï¼š

1. ä¿®æ”¹ `apps/user/api/` æˆ– `apps/user/rpc/` ç›®å½•ä¸‹çš„ä»»ä½• Go æ–‡ä»¶
2. Air è‡ªåŠ¨æ£€æµ‹å˜åŒ–å¹¶é‡æ–°ç¼–è¯‘
3. æœåŠ¡è‡ªåŠ¨é‡å¯ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

### æ·»åŠ æ–°æœåŠ¡

1. åœ¨ `apps/` ç›®å½•ä¸‹åˆ›å»ºæ–°æœåŠ¡ç›®å½•
2. ä½¿ç”¨ goctl ç”ŸæˆæœåŠ¡ä»£ç 
3. ä¿®æ”¹ `deploy/dev/docker-compose.yml` æ·»åŠ æ–°æœåŠ¡é…ç½®
4. åœ¨ `deploy/dev/air/` ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„ Air é…ç½®æ–‡ä»¶
5. æ›´æ–° `deploy/dev/nginx/conf.d/miniblog.conf` æ·»åŠ è·¯ç”±è§„åˆ™

## å¸¸ç”¨å‘½ä»¤

### å¼€å‘ç¯å¢ƒç®¡ç†

#### åŸºç¡€ç¯å¢ƒæœåŠ¡ï¼ˆMySQLã€Redisã€Kafkaï¼‰

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `make env-start` | å¯åŠ¨åŸºç¡€ç¯å¢ƒæœåŠ¡ï¼ˆè‡ªåŠ¨åˆ›å»ºç½‘ç»œï¼‰ |
| `make env-stop` | åœæ­¢åŸºç¡€ç¯å¢ƒæœåŠ¡ |
| `make env-clean` | æ¸…ç†åŸºç¡€ç¯å¢ƒå’Œç½‘ç»œ |

#### åº”ç”¨æœåŠ¡ï¼ˆGo å¾®æœåŠ¡ï¼‰

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `make dev` | åå°å¯åŠ¨åº”ç”¨å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰ |
| `make dev-fg` | å‰å°å¯åŠ¨åº”ç”¨å¼€å‘ç¯å¢ƒï¼ˆçœ‹å®æ—¶æ—¥å¿—ï¼‰ |
| `make dev-stop` | åœæ­¢åº”ç”¨å¼€å‘ç¯å¢ƒ |
| `make dev-restart` | é‡å¯åº”ç”¨å¼€å‘ç¯å¢ƒ |
| `make dev-clean` | æ¸…ç†åº”ç”¨ç¯å¢ƒï¼ˆå®¹å™¨ã€é•œåƒã€æ•°æ®å·ï¼‰ |
| `make dev-logs` | æŸ¥çœ‹åº”ç”¨æœåŠ¡æ—¥å¿— |
| `make dev-status` | æŸ¥çœ‹åº”ç”¨æœåŠ¡çŠ¶æ€ |

### ä»£ç è´¨é‡å·¥å…·

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `make build` | æ„å»ºæ‰€æœ‰æœåŠ¡åˆ° _output/ ç›®å½• |
| `make clean` | æ¸…ç†æ„å»ºäº§ç‰© |
| `make fmt` | æ ¼å¼åŒ–ä»£ç  |
| `make lint` | é™æ€ä»£ç æ£€æŸ¥ |
| `make test` | è¿è¡Œæµ‹è¯• |
| `make install-tools` | å®‰è£…å¼€å‘å·¥å…·é“¾ |

## API æµ‹è¯•

é¡¹ç›®åŒ…å« `request.http` æ–‡ä»¶ï¼Œé…åˆ VSCode çš„ [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client) æ’ä»¶å¯ç›´æ¥æµ‹è¯• APIã€‚

### æµ‹è¯•ç«¯ç‚¹ç¤ºä¾‹

```http
### å¥åº·æ£€æŸ¥
GET http://localhost:8099/health

### ç”¨æˆ·APIæµ‹è¯•
GET http://localhost:8099/api/user/ping

### RPCæœåŠ¡æµ‹è¯•
GET http://localhost:8099/rpc/user/ping
```

## å¼€å‘æŒ‡å—

### 1. ç”Ÿæˆ API æœåŠ¡ä»£ç 

```bash
# åœ¨æœåŠ¡ç›®å½•ä¸‹ç”Ÿæˆä»£ç 
cd apps/user/api
goctl api go -api user.api -dir .
```

### 2. ç”Ÿæˆ RPC æœåŠ¡ä»£ç 

```bash
# åœ¨æœåŠ¡ç›®å½•ä¸‹ç”Ÿæˆä»£ç 
cd apps/user/rpc
goctl rpc protoc rpc.proto --go_out=. --go-grpc_out=. --zrpc_out=.
```

### 3. ä¿®æ”¹ä¸šåŠ¡é€»è¾‘

- API ä¸šåŠ¡é€»è¾‘ï¼š`apps/*/api/internal/logic/`
- RPC ä¸šåŠ¡é€»è¾‘ï¼š`apps/*/rpc/internal/logic/`
- é…ç½®æ–‡ä»¶ï¼š`apps/*/*/etc/`

### 4. æ·»åŠ è·¯ç”±

ä¿®æ”¹å¯¹åº”çš„ `internal/handler/routes.go` æ–‡ä»¶ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**

   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :8099
   lsof -i :8888  
   lsof -i :8889
   ```

2. **Docker æœåŠ¡å¯åŠ¨å¤±è´¥**

   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   cd deploy/dev && docker-compose logs [service-name]
   ```

3. **çƒ­é‡è½½ä¸å·¥ä½œ**
   - æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åœ¨ Air ç›‘å¬ç›®å½•èŒƒå›´å†…
   - æŸ¥çœ‹ Air æ„å»ºæ—¥å¿—æ’æŸ¥ç¼–è¯‘é”™è¯¯
   - ç¡®è®¤ Docker æ–‡ä»¶æŒ‚è½½æ­£ç¡®

4. **ç½‘å…³è·¯ç”±é—®é¢˜**
   - æ£€æŸ¥ Nginx é…ç½®è¯­æ³•
   - ç¡®è®¤ä¸Šæ¸¸æœåŠ¡æ­£å¸¸è¿è¡Œ
   - æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—

### é‡ç½®ç¯å¢ƒ

```bash
# å®Œå…¨æ¸…ç†å¹¶é‡æ–°æ„å»º
make dev-clean
make dev
```

## æ€§èƒ½ä¼˜åŒ–

- **Go Modules ç¼“å­˜**: Docker volume ç¼“å­˜ä¾èµ–åŒ…
- **æ„å»ºç¼“å­˜**: åˆ©ç”¨ Docker åˆ†å±‚ç¼“å­˜
- **çƒ­é‡è½½ä¼˜åŒ–**: Air é…ç½®æ’é™¤ä¸å¿…è¦æ–‡ä»¶ç›‘å¬

## æ‰©å±•åŠŸèƒ½

### åŸºç¡€æœåŠ¡å·²é…ç½®

é¡¹ç›®å·²ç»é…ç½®äº†å®Œæ•´çš„åŸºç¡€æœåŠ¡å’Œå¯è§‚æµ‹æ€§å¥—ä»¶ï¼š

#### åŸºç¡€æœåŠ¡

- **MySQL 8.0**: æ•°æ®åº“æœåŠ¡ï¼ˆç«¯å£ 3306ï¼‰
- **Redis 7**: ç¼“å­˜æœåŠ¡ï¼ˆç«¯å£ 6379ï¼‰
- **Kafka 7.4.0**: æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼ˆç«¯å£ 9092ï¼‰

#### å¯è§‚æµ‹æ€§å¥—ä»¶

- **ğŸ“Š æŒ‡æ ‡ç›‘æ§**: Prometheusï¼ˆ19090ï¼‰+ Grafanaï¼ˆ3000ï¼‰
- **ğŸ“ æ—¥å¿—åˆ†æ**: Elasticsearchï¼ˆ9200ï¼‰+ Kibanaï¼ˆ5601ï¼‰+ Filebeat + go-stash
- **ğŸ” é“¾è·¯è¿½è¸ª**: Jaegerï¼ˆ16686ï¼‰
- **ğŸ›ï¸ ç®¡ç†ç•Œé¢**: Kafka UIï¼ˆ8080ï¼‰

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒï¼š[ç¯å¢ƒæ­å»ºæŒ‡å—](docs/01%20ç¯å¢ƒæ­å»º.md)

### è¿æ¥åŸºç¡€æœåŠ¡

åœ¨åº”ç”¨ä»£ç ä¸­è¿æ¥è¿™äº›æœåŠ¡ï¼š

```yaml
# åº”ç”¨é…ç½®ç¤ºä¾‹
database:
  host: mysql
  port: 3306
  username: miniblog_user
  password: j478EaZGDNPUbnXb

redis:
  host: redis  
  port: 6379
  password: weZ2014P89rlTuWe

kafka:
  brokers:
    - kafka:29092

# å¯è§‚æµ‹æ€§é…ç½®
telemetry:
  # æŒ‡æ ‡æ”¶é›†
  metrics:
    enabled: true
    endpoint: http://prometheus:19090
  
  # é“¾è·¯è¿½è¸ª
  tracing:
    enabled: true
    endpoint: http://jaeger:14268
    service_name: miniblog
    
  # æ—¥å¿—é…ç½®
  logging:
    level: info
    output: /var/log/app/app.log
    format: json
```

### å¿«é€Ÿè®¿é—®é“¾æ¥

| æœåŠ¡ | è®¿é—®åœ°å€ | ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|------|----------|--------|------|------|
| Grafana | <http://localhost:3000> | admin | admin123 | ç›‘æ§å¯è§†åŒ– |
| Kibana | <http://localhost:5601> | - | - | æ—¥å¿—åˆ†æ |
| Jaeger | <http://localhost:16686> | - | - | é“¾è·¯è¿½è¸ª |
| Kafka UI | <http://localhost:8080> | - | - | æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç† |
| Prometheus | <http://localhost:19090> | - | - | æŒ‡æ ‡æŸ¥è¯¢ |

### é›†æˆåº”ç”¨ç›‘æ§

å¯è§‚æµ‹æ€§ç»„ä»¶å·²ç»éƒ¨ç½²å®Œæˆï¼Œæ¥ä¸‹æ¥éœ€è¦åœ¨åº”ç”¨ä»£ç ä¸­é›†æˆï¼š

1. **é›†æˆ Prometheus æŒ‡æ ‡**: åœ¨ go-zero ä¸­å¯ç”¨ metrics
2. **é›†æˆ Jaeger è¿½è¸ª**: é…ç½®åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª
3. **é›†æˆç»“æ„åŒ–æ—¥å¿—**: è¾“å‡º JSON æ ¼å¼æ—¥å¿—åˆ°æŒ‡å®šç›®å½•
4. **é…ç½®å‘Šè­¦è§„åˆ™**: åœ¨ Grafana ä¸­è®¾ç½®ç›‘æ§å‘Šè­¦

## ç”Ÿäº§éƒ¨ç½²

å¼€å‘ç¯å¢ƒé…ç½®ä¸é€‚ç”¨äºç”Ÿäº§ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼š

1. ç§»é™¤çƒ­é‡è½½å·¥å…·
2. å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°  
3. ç”Ÿäº§çº§ Nginx é…ç½®
4. å¥åº·æ£€æŸ¥å’Œç›‘æ§
5. å®‰å…¨é…ç½®å’Œè¯ä¹¦

## è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request å’Œ Issueã€‚

## License

MIT
